# Error: Autopilot Hybrid Entra ID Join fails with code 0x80070002
*Applies to: Windows Autopilot (Hybrid Azure AD Join)

## Scenario
During Autopilot provisioning, device fails Hybrid Entra ID join with error code 80070002
> Something went wrong.  
> Confirm you are using the correct sign-in information and that your organization uses this feature. You can try to do this again or contact your system administrator with the error code 80070002.

```
Client Event Log:
Application and Service Logs > Microsoft > Windows > Shell-Core/Operational
Event ID: 62407
CloudExperienceHost Web App Event
'OtaDjUIError_WaitForDomainConnectivityFailure', Value: '80070002'
```
```
Server Event Log:
Application and Service Logs > Microsoft > Intune > ODJConnectorService > Operational
Microsoft-Intune-ODJConnectorService/Operational  
Event ID: 30132  
RequestOfflineDomainJoinBlob_Failure: Failed to generate ODJ blob  
WinErrorCode: 1212 (ERROR_INVALID_DOMAINNAME) 
DiagnosticText: We are unable to complete your request because a server-side error occurred. Please try again. [Exception Message: "DiagnosticException: 0x0FFFFFFF. We are unable to complete your request because a server-side error occurred. Please try again."] [Exception Message: "Failed to call NetProvisionComputerAccount machineName=..."]
```

---

## Symptom
- User sees Autopilot enrollment failure with code **80070002**.  
- Event Viewer logs contain Shell-Core Event ID 62407 and ODJConnectorService Event ID 30132.  
- Intune service logs show `WinErrorCode: 1212 (ERROR_INVALID_DOMAINNAME)`.

---

## Root Cause
- **Scenario 1**: Domain Join profile uses macros (`%SERIAL%`, `%RAND%`, etc.).  
  Hybrid Domain Join does not support variables — only static prefixes (e.g. `HJ-`, `TEST-`).  

- **Scenario 2**: Domain name contains a trailing space.  
  Causes `WinErrorCode: 1212 - ERROR_INVALID_DOMAINNAME`.

---

## Solution
- Remove any macros from **Computer Name Prefix** in the Domain Join profile.  
  Use something like `HAADJ-` instead of `HAADJ-%SERIAL%`.  
- Ensure the domain name has no spaces (e.g. `contoso.com`, not `contoso.com `).

---

## References
- [Hybrid Entra ID Join Autopilot profile limitations](https://learn.microsoft.com/en-us/autopilot/tutorial/user-driven/hybrid-azure-ad-join-domain-join-profile)

> ⚠️ **Important**  
> This computer name prefix doesn't support the `%SERIAL%` or `%RAND:x%` variables that can be used with the Apply device name template in the Microsoft Entra join scenario.